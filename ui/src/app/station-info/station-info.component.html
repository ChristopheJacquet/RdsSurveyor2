<div class="station-options">
  <mat-button-toggle-group name="rdsVariant" value="rds"
      (change)="setRdsVariant($event)">
    <mat-button-toggle value="rds">RDS</mat-button-toggle>
    <mat-button-toggle value="rbds">RBDS</mat-button-toggle>
  </mat-button-toggle-group>
</div>


<div class="infogrid">
  <div class="infogrid-row">
    <div class="infogrid-cell">
      <div class="infogrid-title">PI</div>
      <div class="infogrid-value">{{ station.pi | hex:4 }} </div>
    </div>
    <div class="infogrid-cell" *ngIf="isRbds()">
      <div class="infogrid-title">Call letters</div>
      <div class="infogrid-value">{{ station.getCallsign() }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">PS</div>
      <div class="infogrid-value">{{ station.getPS() }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">Station name</div>
      <div class="infogrid-value">{{ station.getStationName() }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">Traffic info</div>
      <div class="infogrid-value">{{ getTrafficString() }} </div>
    </div>
  </div>

  <div class="infogrid-row">
    <div class="infogrid-cell infogrid-cell-limited">
      <div class="infogrid-title">Dynamic PS</div>
      <div class="infogrid-value">{{ station.getDynamicPSmessage() }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">Long PS</div>
      <div class="infogrid-value">{{ station.getLPS() }} </div>
    </div>
  </div>

  <div class="infogrid-row">
    <div class="infogrid-cell">
      <div class="infogrid-title">Time</div>
      <div class="infogrid-value">{{ station.datetime }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">PTY [{{ station.di_dynamic_pty == true ? "Dynamic" : "Static" }}]</div>
      <div class="infogrid-value">{{ getPtyString() }} </div>
    </div>
    <div class="infogrid-cell">
      <div class="infogrid-title">PTYN</div>
      <div class="infogrid-value">{{ station.getPTYN() }} </div>
    </div>
  </div>

  <div class="infogrid-row">
    <div class="infogrid-cell">
      <div class="infogrid-title">RT (current radiotext)</div>
      <div class="infogrid-value">{{ station.getRT() }} </div>
    </div>
  </div>

  <div class="infogrid-row">
    <div class="infogrid-cell">
      <div class="infogrid-title">Group statistics</div>
      <div class="infogrid-title">
        <table class="group-stats">
          <tr>
            <th></th>
            <th *ngFor="let i of group_ids">{{ i }}</th>
          </tr>
          <tr>
            <th>A</th>
            <td *ngFor="let i of group_ids">
              <div class="group-stats-number" [class.group-stats-any]="station.group_stats[i*2] > 0">
                {{ station.group_stats[i*2] }}
              </div>
            </td>
          </tr>
          <tr>
            <th>B</th>
            <td *ngFor="let i of group_ids">
              <div class="group-stats-number" [class.group-stats-any]="station.group_stats[i*2+1] > 0">
                {{ station.group_stats[i*2+1] }}
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<mat-tab-group>
  <mat-tab label="Base">
    <div class="infogrid">
      <div class="infogrid-row">
        <div class="infogrid-cell">
          <div class="infogrid-title">Country</div>
          <div class="infogrid-value">Placeholder </div>
        </div>
        <div class="infogrid-cell">
          <div class="infogrid-title">Language</div>
          <div class="infogrid-value">Placeholder </div>
        </div>
        <div class="infogrid-cell">
          <div class="infogrid-title">PIN</div>
          <div class="infogrid-value">
            <span *ngIf="station.pin_day != undefined && station.pin_hour != undefined && station.pin_minute != undefined">
              D={{ station.pin_day }}, {{ station.pin_hour | number: '2.0-0' }}:{{ station.pin_minute | number: '2.0-0'}}
            </span> 
          </div>
        </div>
        <div class="infogrid-cell">
          <div class="infogrid-title">Sound Information</div>
          <div class="infogrid-value infogrid-chips">
            <span *ngIf="station.music">Music</span>
            <span *ngIf="station.music == false">Speech</span>
            <span *ngIf="station.di_stereo">Stereo</span>
            <span *ngIf="station.di_compressed">Compressed</span>
            <span *ngIf="station.di_artificial_head">Artificial head</span>
            &nbsp;
          </div>
        </div>
      </div>
    </div>
    <div><!-- AFs -->
      <div *ngFor="let e of station.afLists | keyvalue">
        <strong>AF list, method {{ e.value.method }}:</strong>
        {{ e.value.transmitterFrequency/10 | number: '1.1-1' }} →
        <span *ngFor="let af of e.value.afs">{{ af/10 | number: '1.1-1' }}  </span>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="RT">
    <mat-list role="list">
      <mat-list-item role="listitem" *ngFor="let msg of getRThistory()">
        <div>{{ msg.rt }}</div>
        <div *ngIf="msg.rtPlus != null">{{ msg.rtPlus }}</div>
      </mat-list-item>
    </mat-list>    
  </mat-tab>
  <mat-tab label="EON">
    EON
  </mat-tab>
  <mat-tab label="DAB cross-reference" *ngIf="station.dab_cross_ref_app.enabled">
    <table>
      <tr><th>Mode</th><th>Frequency</th><th>EId</th></tr>
      <tr *ngFor="let e of station.dab_cross_ref_app.ensembleTable">
        <td>{{ e.mode }}</td>
        <td>{{ e.freqKhz }} kHz</td>
        <td>{{ e.eid | hex:4 }}</td>
      </tr>
    </table>
  </mat-tab>
</mat-tab-group>
